var k=(e,t,r)=>(n,s)=>{let o=-1;return c(0);async function c(i){if(i<=o)throw new Error("next() called multiple times");o=i;let a,l=!1,h;if(e[i]?(h=e[i][0][0],n.req.routeIndex=i):h=i===e.length&&s||void 0,h)try{a=await h(n,()=>c(i+1))}catch(u){if(u instanceof Error&&t)n.error=u,a=await t(u,n),l=!0;else throw u}else n.finalized===!1&&r&&(a=await r(n));return a&&(n.finalized===!1||l)&&(n.res=a),n}};var Z=Symbol();var ee=async(e,t=Object.create(null))=>{let{all:r=!1,dot:n=!1}=t,o=(e instanceof j?e.raw.headers:e.headers).get("Content-Type");return o?.startsWith("multipart/form-data")||o?.startsWith("application/x-www-form-urlencoded")?Ee(e,{all:r,dot:n}):{}};async function Ee(e,t){let r=await e.formData();return r?be(r,t):{}}function be(e,t){let r=Object.create(null);return e.forEach((n,s)=>{t.all||s.endsWith("[]")?Ae(r,s,n):r[s]=n}),t.dot&&Object.entries(r).forEach(([n,s])=>{n.includes(".")&&(we(r,n,s),delete r[n])}),r}var Ae=(e,t,r)=>{e[t]!==void 0?Array.isArray(e[t])?e[t].push(r):e[t]=[e[t],r]:t.endsWith("[]")?e[t]=[r]:e[t]=r},we=(e,t,r)=>{let n=e,s=t.split(".");s.forEach((o,c)=>{c===s.length-1?n[o]=r:((!n[o]||typeof n[o]!="object"||Array.isArray(n[o])||n[o]instanceof File)&&(n[o]=Object.create(null)),n=n[o])})};var U=e=>{let t=e.split("/");return t[0]===""&&t.shift(),t},te=e=>{let{groups:t,path:r}=Oe(e),n=U(r);return Me(n,t)},Oe=e=>{let t=[];return e=e.replace(/\{[^}]+\}/g,(r,n)=>{let s=`@${n}`;return t.push([s,r]),s}),{groups:t,path:e}},Me=(e,t)=>{for(let r=t.length-1;r>=0;r--){let[n]=t[r];for(let s=e.length-1;s>=0;s--)if(e[s].includes(n)){e[s]=e[s].replace(n,t[r][1]);break}}return e},H={},re=(e,t)=>{if(e==="*")return"*";let r=e.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);if(r){let n=`${e}#${t}`;return H[n]||(r[2]?H[n]=t&&t[0]!==":"&&t[0]!=="*"?[n,r[1],new RegExp(`^${r[2]}(?=/${t})`)]:[e,r[1],new RegExp(`^${r[2]}$`)]:H[n]=[e,r[1],!0]),H[n]}return null},_=(e,t)=>{try{return t(e)}catch{return e.replace(/(?:%[0-9A-Fa-f]{2})+/g,r=>{try{return t(r)}catch{return r}})}},Pe=e=>_(e,decodeURI),B=e=>{let t=e.url,r=t.indexOf("/",t.indexOf(":")+4),n=r;for(;n<t.length;n++){let s=t.charCodeAt(n);if(s===37){let o=t.indexOf("?",n),c=t.slice(r,o===-1?void 0:o);return Pe(c.includes("%25")?c.replace(/%25/g,"%2525"):c)}else if(s===63)break}return t.slice(r,n)};var ne=e=>{let t=B(e);return t.length>1&&t.at(-1)==="/"?t.slice(0,-1):t},E=(e,t,...r)=>(r.length&&(t=E(t,...r)),`${e?.[0]==="/"?"":"/"}${e}${t==="/"?"":`${e?.at(-1)==="/"?"":"/"}${t?.[0]==="/"?t.slice(1):t}`}`),C=e=>{if(e.charCodeAt(e.length-1)!==63||!e.includes(":"))return null;let t=e.split("/"),r=[],n="";return t.forEach(s=>{if(s!==""&&!/\:/.test(s))n+="/"+s;else if(/\:/.test(s))if(/\?/.test(s)){r.length===0&&n===""?r.push("/"):r.push(n);let o=s.replace("?","");n+="/"+o,r.push(n)}else n+="/"+s}),r.filter((s,o,c)=>c.indexOf(s)===o)},F=e=>/[%+]/.test(e)?(e.indexOf("+")!==-1&&(e=e.replace(/\+/g," ")),e.indexOf("%")!==-1?_(e,q):e):e,se=(e,t,r)=>{let n;if(!r&&t&&!/[%+]/.test(t)){let c=e.indexOf(`?${t}`,8);for(c===-1&&(c=e.indexOf(`&${t}`,8));c!==-1;){let i=e.charCodeAt(c+t.length+1);if(i===61){let a=c+t.length+2,l=e.indexOf("&",a);return F(e.slice(a,l===-1?void 0:l))}else if(i==38||isNaN(i))return"";c=e.indexOf(`&${t}`,c+1)}if(n=/[%+]/.test(e),!n)return}let s={};n??=/[%+]/.test(e);let o=e.indexOf("?",8);for(;o!==-1;){let c=e.indexOf("&",o+1),i=e.indexOf("=",o);i>c&&c!==-1&&(i=-1);let a=e.slice(o+1,i===-1?c===-1?void 0:c:i);if(n&&(a=F(a)),o=c,a==="")continue;let l;i===-1?l="":(l=e.slice(i+1,c===-1?void 0:c),n&&(l=F(l))),r?(s[a]&&Array.isArray(s[a])||(s[a]=[]),s[a].push(l)):s[a]??=l}return t?s[t]:s},oe=se,ae=(e,t)=>se(e,t,!0),q=decodeURIComponent;var ie=e=>_(e,q),j=class{raw;#t;#e;routeIndex=0;path;bodyCache={};constructor(e,t="/",r=[[]]){this.raw=e,this.path=t,this.#e=r,this.#t={}}param(e){return e?this.#r(e):this.#o()}#r(e){let t=this.#e[0][this.routeIndex][1][e],r=this.#s(t);return r&&/\%/.test(r)?ie(r):r}#o(){let e={},t=Object.keys(this.#e[0][this.routeIndex][1]);for(let r of t){let n=this.#s(this.#e[0][this.routeIndex][1][r]);n!==void 0&&(e[r]=/\%/.test(n)?ie(n):n)}return e}#s(e){return this.#e[1]?this.#e[1][e]:e}query(e){return oe(this.url,e)}queries(e){return ae(this.url,e)}header(e){if(e)return this.raw.headers.get(e)??void 0;let t={};return this.raw.headers.forEach((r,n)=>{t[n]=r}),t}async parseBody(e){return this.bodyCache.parsedBody??=await ee(this,e)}#n=e=>{let{bodyCache:t,raw:r}=this,n=t[e];if(n)return n;let s=Object.keys(t)[0];return s?t[s].then(o=>(s==="json"&&(o=JSON.stringify(o)),new Response(o)[e]())):t[e]=r[e]()};json(){return this.#n("text").then(e=>JSON.parse(e))}text(){return this.#n("text")}arrayBuffer(){return this.#n("arrayBuffer")}blob(){return this.#n("blob")}formData(){return this.#n("formData")}addValidatedData(e,t){this.#t[e]=t}valid(e){return this.#t[e]}get url(){return this.raw.url}get method(){return this.raw.method}get[Z](){return this.#e}get matchedRoutes(){return this.#e[0].map(([[,e]])=>e)}get routePath(){return this.#e[0].map(([[,e]])=>e)[this.routeIndex].path}};var ce={Stringify:1,BeforeStream:2,Stream:3},Te=(e,t)=>{let r=new String(e);return r.isEscaped=!0,r.callbacks=t,r};var W=async(e,t,r,n,s)=>{typeof e=="object"&&!(e instanceof String)&&(e instanceof Promise||(e=e.toString()),e instanceof Promise&&(e=await e));let o=e.callbacks;if(!o?.length)return Promise.resolve(e);s?s[0]+=e:s=[e];let c=Promise.all(o.map(i=>i({phase:t,buffer:s,context:n}))).then(i=>Promise.all(i.filter(Boolean).map(a=>W(a,t,!1,n,s))).then(()=>s[0]));return r?Te(await c,o):c};var Se="text/plain; charset=UTF-8",K=(e,t)=>({"Content-Type":e,...t}),le=class{#t;#e;env={};#r;finalized=!1;error;#o;#s;#n;#h;#c;#l;#i;#u;#f;constructor(e,t){this.#t=e,t&&(this.#s=t.executionCtx,this.env=t.env,this.#l=t.notFoundHandler,this.#f=t.path,this.#u=t.matchResult)}get req(){return this.#e??=new j(this.#t,this.#f,this.#u),this.#e}get event(){if(this.#s&&"respondWith"in this.#s)return this.#s;throw Error("This context has no FetchEvent")}get executionCtx(){if(this.#s)return this.#s;throw Error("This context has no ExecutionContext")}get res(){return this.#n||=new Response(null,{headers:this.#i??=new Headers})}set res(e){if(this.#n&&e){e=new Response(e.body,e);for(let[t,r]of this.#n.headers.entries())if(t!=="content-type")if(t==="set-cookie"){let n=this.#n.headers.getSetCookie();e.headers.delete("set-cookie");for(let s of n)e.headers.append("set-cookie",s)}else e.headers.set(t,r)}this.#n=e,this.finalized=!0}render=(...e)=>(this.#c??=t=>this.html(t),this.#c(...e));setLayout=e=>this.#h=e;getLayout=()=>this.#h;setRenderer=e=>{this.#c=e};header=(e,t,r)=>{this.finalized&&(this.#n=new Response(this.#n.body,this.#n));let n=this.#n?this.#n.headers:this.#i??=new Headers;t===void 0?n.delete(e):r?.append?n.append(e,t):n.set(e,t)};status=e=>{this.#o=e};set=(e,t)=>{this.#r??=new Map,this.#r.set(e,t)};get=e=>this.#r?this.#r.get(e):void 0;get var(){return this.#r?Object.fromEntries(this.#r):{}}#a(e,t,r){let n=this.#n?new Headers(this.#n.headers):this.#i??new Headers;if(typeof t=="object"&&"headers"in t){let o=t.headers instanceof Headers?t.headers:new Headers(t.headers);for(let[c,i]of o)c.toLowerCase()==="set-cookie"?n.append(c,i):n.set(c,i)}if(r)for(let[o,c]of Object.entries(r))if(typeof c=="string")n.set(o,c);else{n.delete(o);for(let i of c)n.append(o,i)}let s=typeof t=="number"?t:t?.status??this.#o;return new Response(e,{status:s,headers:n})}newResponse=(...e)=>this.#a(...e);body=(e,t,r)=>this.#a(e,t,r);text=(e,t,r)=>!this.#i&&!this.#o&&!t&&!r&&!this.finalized?new Response(e):this.#a(e,t,K(Se,r));json=(e,t,r)=>this.#a(JSON.stringify(e),t,K("application/json",r));html=(e,t,r)=>{let n=s=>this.#a(s,t,K("text/html; charset=UTF-8",r));return typeof e=="object"?W(e,ce.Stringify,!1,{}).then(n):n(e)};redirect=(e,t)=>{let r=String(e);return this.header("Location",/[^\x00-\xFF]/.test(r)?encodeURI(r):r),this.newResponse(null,t??302)};notFound=()=>(this.#l??=()=>new Response,this.#l(this))};var f="ALL",he="all",ue=["get","post","put","delete","options","patch"],D="Can not add a route since the matcher is already built.",L=class extends Error{};var fe="__COMPOSED_HANDLER";var je=e=>e.text("404 Not Found",404),de=(e,t)=>{if("getResponse"in e){let r=e.getResponse();return t.newResponse(r.body,r)}return console.error(e),t.text("Internal Server Error",500)},G=class{get;post;put;delete;options;patch;all;on;use;router;getPath;_basePath="/";#t="/";routes=[];constructor(e={}){[...ue,he].forEach(s=>{this[s]=(o,...c)=>(typeof o=="string"?this.#t=o:this.#o(s,this.#t,o),c.forEach(i=>{this.#o(s,this.#t,i)}),this)}),this.on=(s,o,...c)=>{for(let i of[o].flat()){this.#t=i;for(let a of[s].flat())c.map(l=>{this.#o(a.toUpperCase(),this.#t,l)})}return this},this.use=(s,...o)=>(typeof s=="string"?this.#t=s:(this.#t="*",o.unshift(s)),o.forEach(c=>{this.#o(f,this.#t,c)}),this);let{strict:r,...n}=e;Object.assign(this,n),this.getPath=r??!0?e.getPath??B:ne}#e(){let e=new G({router:this.router,getPath:this.getPath});return e.errorHandler=this.errorHandler,e.#r=this.#r,e.routes=this.routes,e}#r=je;errorHandler=de;route(e,t){let r=this.basePath(e);return t.routes.map(n=>{let s;t.errorHandler===de?s=n.handler:(s=async(o,c)=>(await k([],t.errorHandler)(o,()=>n.handler(o,c))).res,s[fe]=n.handler),r.#o(n.method,n.path,s)}),this}basePath(e){let t=this.#e();return t._basePath=E(this._basePath,e),t}onError=e=>(this.errorHandler=e,this);notFound=e=>(this.#r=e,this);mount(e,t,r){let n,s;r&&(typeof r=="function"?s=r:(s=r.optionHandler,r.replaceRequest===!1?n=i=>i:n=r.replaceRequest));let o=s?i=>{let a=s(i);return Array.isArray(a)?a:[a]}:i=>{let a;try{a=i.executionCtx}catch{}return[i.env,a]};n||=(()=>{let i=E(this._basePath,e),a=i==="/"?0:i.length;return l=>{let h=new URL(l.url);return h.pathname=h.pathname.slice(a)||"/",new Request(h,l)}})();let c=async(i,a)=>{let l=await t(n(i.req.raw),...o(i));if(l)return l;await a()};return this.#o(f,E(e,"*"),c),this}#o(e,t,r){e=e.toUpperCase(),t=E(this._basePath,t);let n={basePath:this._basePath,path:t,method:e,handler:r};this.router.add(e,t,[r,n]),this.routes.push(n)}#s(e,t){if(e instanceof Error)return this.errorHandler(e,t);throw e}#n(e,t,r,n){if(n==="HEAD")return(async()=>new Response(null,await this.#n(e,t,r,"GET")))();let s=this.getPath(e,{env:r}),o=this.router.match(n,s),c=new le(e,{path:s,matchResult:o,env:r,executionCtx:t,notFoundHandler:this.#r});if(o[0].length===1){let a;try{a=o[0][0][0][0](c,async()=>{c.res=await this.#r(c)})}catch(l){return this.#s(l,c)}return a instanceof Promise?a.then(l=>l||(c.finalized?c.res:this.#r(c))).catch(l=>this.#s(l,c)):a??this.#r(c)}let i=k(o[0],this.errorHandler,this.#r);return(async()=>{try{let a=await i(c);if(!a.finalized)throw new Error("Context is not finalized. Did you forget to return a Response object or `await next()`?");return a.res}catch(a){return this.#s(a,c)}})()}fetch=(e,...t)=>this.#n(e,t[1],t[0],e.method);request=(e,t,r,n)=>e instanceof Request?this.fetch(t?new Request(e,t):e,r,n):(e=e.toString(),this.fetch(new Request(/^https?:\/\//.test(e)?e:`http://localhost${E("/",e)}`,t),r,n));fire=()=>{addEventListener("fetch",e=>{e.respondWith(this.#n(e.request,e,void 0,e.request.method))})}};var $="[^/]+",P=".*",T="(?:|/.*)",b=Symbol(),He=new Set(".\\+*[^]$()");function _e(e,t){return e.length===1?t.length===1?e<t?-1:1:-1:t.length===1||e===P||e===T?1:t===P||t===T?-1:e===$?1:t===$?-1:e.length===t.length?e<t?-1:1:t.length-e.length}var N=class{#t;#e;#r=Object.create(null);insert(e,t,r,n,s){if(e.length===0){if(this.#t!==void 0)throw b;if(s)return;this.#t=t;return}let[o,...c]=e,i=o==="*"?c.length===0?["","",P]:["","",$]:o==="/*"?["","",T]:o.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/),a;if(i){let l=i[1],h=i[2]||$;if(l&&i[2]&&(h===".*"||(h=h.replace(/^\((?!\?:)(?=[^)]+\)$)/,"(?:"),/\((?!\?:)/.test(h))))throw b;if(a=this.#r[h],!a){if(Object.keys(this.#r).some(u=>u!==P&&u!==T))throw b;if(s)return;a=this.#r[h]=new N,l!==""&&(a.#e=n.varIndex++)}!s&&l!==""&&r.push([l,a.#e])}else if(a=this.#r[o],!a){if(Object.keys(this.#r).some(l=>l.length>1&&l!==P&&l!==T))throw b;if(s)return;a=this.#r[o]=new N}a.insert(c,t,r,n,s)}buildRegExpStr(){let t=Object.keys(this.#r).sort(_e).map(r=>{let n=this.#r[r];return(typeof n.#e=="number"?`(${r})@${n.#e}`:He.has(r)?`\\${r}`:r)+n.buildRegExpStr()});return typeof this.#t=="number"&&t.unshift(`#${this.#t}`),t.length===0?"":t.length===1?t[0]:"(?:"+t.join("|")+")"}};var me=class{#t={varIndex:0};#e=new N;insert(e,t,r){let n=[],s=[];for(let c=0;;){let i=!1;if(e=e.replace(/\{[^}]+\}/g,a=>{let l=`@\\${c}`;return s[c]=[l,a],c++,i=!0,l}),!i)break}let o=e.match(/(?::[^\/]+)|(?:\/\*$)|./g)||[];for(let c=s.length-1;c>=0;c--){let[i]=s[c];for(let a=o.length-1;a>=0;a--)if(o[a].indexOf(i)!==-1){o[a]=o[a].replace(i,s[c][1]);break}}return this.#e.insert(o,t,n,this.#t,r),n}buildRegExp(){let e=this.#e.buildRegExpStr();if(e==="")return[/^$/,[],[]];let t=0,r=[],n=[];return e=e.replace(/#(\d+)|@(\d+)|\.\*\$/g,(s,o,c)=>o!==void 0?(r[++t]=Number(o),"$()"):(c!==void 0&&(n[Number(c)]=++t),"")),[new RegExp(`^${e}`),r,n]}};var pe=[],Ce=[/^$/,[],Object.create(null)],ge=Object.create(null);function ye(e){return ge[e]??=new RegExp(e==="*"?"":`^${e.replace(/\/\*$|([.\\+*[^\]$()])/g,(t,r)=>r?`\\${r}`:"(?:|/.*)")}$`)}function De(){ge=Object.create(null)}function Le(e){let t=new me,r=[];if(e.length===0)return Ce;let n=e.map(l=>[!/\*|\/:/.test(l[0]),...l]).sort(([l,h],[u,m])=>l?1:u?-1:h.length-m.length),s=Object.create(null);for(let l=0,h=-1,u=n.length;l<u;l++){let[m,g,d]=n[l];m?s[g]=[d.map(([y])=>[y,Object.create(null)]),pe]:h++;let p;try{p=t.insert(g,h,m)}catch(y){throw y===b?new L(g):y}m||(r[h]=d.map(([y,A])=>{let O=Object.create(null);for(A-=1;A>=0;A--){let[v,I]=p[A];O[v]=I}return[y,O]}))}let[o,c,i]=t.buildRegExp();for(let l=0,h=r.length;l<h;l++)for(let u=0,m=r[l].length;u<m;u++){let g=r[l][u]?.[1];if(!g)continue;let d=Object.keys(g);for(let p=0,y=d.length;p<y;p++)g[d[p]]=i[g[d[p]]]}let a=[];for(let l in c)a[l]=r[c[l]];return[o,a,s]}function w(e,t){if(e){for(let r of Object.keys(e).sort((n,s)=>s.length-n.length))if(ye(r).test(t))return[...e[r]]}}var z=class{name="RegExpRouter";#t;#e;constructor(){this.#t={[f]:Object.create(null)},this.#e={[f]:Object.create(null)}}add(e,t,r){let n=this.#t,s=this.#e;if(!n||!s)throw new Error(D);n[e]||[n,s].forEach(i=>{i[e]=Object.create(null),Object.keys(i[f]).forEach(a=>{i[e][a]=[...i[f][a]]})}),t==="/*"&&(t="*");let o=(t.match(/\/:/g)||[]).length;if(/\*$/.test(t)){let i=ye(t);e===f?Object.keys(n).forEach(a=>{n[a][t]||=w(n[a],t)||w(n[f],t)||[]}):n[e][t]||=w(n[e],t)||w(n[f],t)||[],Object.keys(n).forEach(a=>{(e===f||e===a)&&Object.keys(n[a]).forEach(l=>{i.test(l)&&n[a][l].push([r,o])})}),Object.keys(s).forEach(a=>{(e===f||e===a)&&Object.keys(s[a]).forEach(l=>i.test(l)&&s[a][l].push([r,o]))});return}let c=C(t)||[t];for(let i=0,a=c.length;i<a;i++){let l=c[i];Object.keys(s).forEach(h=>{(e===f||e===h)&&(s[h][l]||=[...w(n[h],l)||w(n[f],l)||[]],s[h][l].push([r,o-a+i+1]))})}}match(e,t){De();let r=this.#r();return this.match=(n,s)=>{let o=r[n]||r[f],c=o[2][s];if(c)return c;let i=s.match(o[0]);if(!i)return[[],pe];let a=i.indexOf("",1);return[o[1][a],i]},this.match(e,t)}#r(){let e=Object.create(null);return Object.keys(this.#e).concat(Object.keys(this.#t)).forEach(t=>{e[t]||=this.#o(t)}),this.#t=this.#e=void 0,e}#o(e){let t=[],r=e===f;return[this.#t,this.#e].forEach(n=>{let s=n[e]?Object.keys(n[e]).map(o=>[o,n[e][o]]):[];s.length!==0?(r||=!0,t.push(...s)):e!==f&&t.push(...Object.keys(n[f]).map(o=>[o,n[f][o]]))}),r?Le(t):null}};var V=class{name="SmartRouter";#t=[];#e=[];constructor(e){this.#t=e.routers}add(e,t,r){if(!this.#e)throw new Error(D);this.#e.push([e,t,r])}match(e,t){if(!this.#e)throw new Error("Fatal error");let r=this.#t,n=this.#e,s=r.length,o=0,c;for(;o<s;o++){let i=r[o];try{for(let a=0,l=n.length;a<l;a++)i.add(...n[a]);c=i.match(e,t)}catch(a){if(a instanceof L)continue;throw a}this.match=i.match.bind(i),this.#t=[i],this.#e=void 0;break}if(o===s)throw new Error("Fatal error");return this.name=`SmartRouter + ${this.activeRouter.name}`,c}get activeRouter(){if(this.#e||this.#t.length!==1)throw new Error("No active router has been determined yet.");return this.#t[0]}};var S=Object.create(null),Q=class{#t;#e;#r;#o=0;#s=S;constructor(e,t,r){if(this.#e=r||Object.create(null),this.#t=[],e&&t){let n=Object.create(null);n[e]={handler:t,possibleKeys:[],score:0},this.#t=[n]}this.#r=[]}insert(e,t,r){this.#o=++this.#o;let n=this,s=te(t),o=[];for(let c=0,i=s.length;c<i;c++){let a=s[c],l=s[c+1],h=re(a,l),u=Array.isArray(h)?h[0]:a;if(u in n.#e){n=n.#e[u],h&&o.push(h[1]);continue}n.#e[u]=new Q,h&&(n.#r.push(h),o.push(h[1])),n=n.#e[u]}return n.#t.push({[e]:{handler:r,possibleKeys:o.filter((c,i,a)=>a.indexOf(c)===i),score:this.#o}}),n}#n(e,t,r,n){let s=[];for(let o=0,c=e.#t.length;o<c;o++){let i=e.#t[o],a=i[t]||i[f],l={};if(a!==void 0&&(a.params=Object.create(null),s.push(a),r!==S||n&&n!==S))for(let h=0,u=a.possibleKeys.length;h<u;h++){let m=a.possibleKeys[h],g=l[a.score];a.params[m]=n?.[m]&&!g?n[m]:r[m]??n?.[m],l[a.score]=!0}}return s}search(e,t){let r=[];this.#s=S;let s=[this],o=U(t),c=[];for(let i=0,a=o.length;i<a;i++){let l=o[i],h=i===a-1,u=[];for(let m=0,g=s.length;m<g;m++){let d=s[m],p=d.#e[l];p&&(p.#s=d.#s,h?(p.#e["*"]&&r.push(...this.#n(p.#e["*"],e,d.#s)),r.push(...this.#n(p,e,d.#s))):u.push(p));for(let y=0,A=d.#r.length;y<A;y++){let O=d.#r[y],v=d.#s===S?{}:{...d.#s};if(O==="*"){let x=d.#e["*"];x&&(r.push(...this.#n(x,e,d.#s)),x.#s=v,u.push(x));continue}let[I,J,M]=O;if(!l&&!(M instanceof RegExp))continue;let R=d.#e[I],Re=o.slice(i).join("/");if(M instanceof RegExp){let x=M.exec(Re);if(x){if(v[J]=x[0],r.push(...this.#n(R,e,d.#s,v)),Object.keys(R.#e).length){R.#s=v;let xe=x[0].match(/\//)?.length??0;(c[xe]||=[]).push(R)}continue}}(M===!0||M.test(l))&&(v[J]=l,h?(r.push(...this.#n(R,e,v,d.#s)),R.#e["*"]&&r.push(...this.#n(R.#e["*"],e,v,d.#s))):(R.#s=v,u.push(R)))}}s=u.concat(c.shift()??[])}return r.length>1&&r.sort((i,a)=>i.score-a.score),[r.map(({handler:i,params:a})=>[i,a])]}};var X=class{name="TrieRouter";#t;constructor(){this.#t=new Q}add(e,t,r){let n=C(t);if(n){for(let s=0,o=n.length;s<o;s++)this.#t.insert(e,n[s],r);return}this.#t.insert(e,t,r)}match(e,t){return this.#t.search(e,t)}};var Y=class extends G{constructor(e={}){super(e),this.router=e.router??new V({routers:[new z,new X]})}};var ve=new Y;ve.get("/api/savings-products",async e=>e.json([{id:"savings-001",name:"\uAE30\uBCF8 \uC815\uAE30\uC801\uAE08",annualRate:3.2,minMonthlyAmount:1e4,maxMonthlyAmount:5e5,availableTerms:12},{id:"savings-002",name:"\uC790\uC720\uC801\uAE08 \uD50C\uB7EC\uC2A4",annualRate:2.8,minMonthlyAmount:5e4,maxMonthlyAmount:1e6,availableTerms:24},{id:"savings-003",name:"\uCCAD\uB144 \uD76C\uB9DD\uC801\uAE08",annualRate:3.5,minMonthlyAmount:1e4,maxMonthlyAmount:3e5,availableTerms:12},{id:"savings-004",name:"\uC2A4\uD0C0 \uC815\uAE30\uC801\uAE08",annualRate:3.1,minMonthlyAmount:1e4,maxMonthlyAmount:5e5,availableTerms:24},{id:"savings-005",name:"\uC8FC\uAC70\uB798 \uC6B0\uB300\uC801\uAE08",annualRate:3.4,minMonthlyAmount:1e5,maxMonthlyAmount:1e6,availableTerms:24},{id:"savings-006",name:"\uD3B8\uD55C \uC815\uAE30\uC801\uAE08",annualRate:3,minMonthlyAmount:1e4,maxMonthlyAmount:3e5,availableTerms:12},{id:"savings-007",name:"\uB4DC\uB9BC \uCCAD\uB144\uC801\uAE08",annualRate:3.6,minMonthlyAmount:5e4,maxMonthlyAmount:5e5,availableTerms:24},{id:"savings-008",name:"\uC6D0 \uC815\uAE30\uC801\uAE08",annualRate:2.9,minMonthlyAmount:1e4,maxMonthlyAmount:5e5,availableTerms:18},{id:"savings-009",name:"\uCCAD\uB144 \uD76C\uB9DD\uD50C\uB7EC\uC2A4\uC801\uAE08",annualRate:3.7,minMonthlyAmount:1e4,maxMonthlyAmount:3e5,availableTerms:12},{id:"savings-010",name:"\uC6D0\uD050 \uC815\uAE30\uC801\uAE08",annualRate:3.3,minMonthlyAmount:5e4,maxMonthlyAmount:1e6,availableTerms:6},{id:"savings-011",name:"\uCCAD\uB144 \uB3C4\uC57D\uC801\uAE08",annualRate:3.8,minMonthlyAmount:1e5,maxMonthlyAmount:5e5,availableTerms:24},{id:"savings-012",name:"\uB9C8\uC74C \uD3B8\uD55C \uC815\uAE30\uC801\uAE08",annualRate:2.7,minMonthlyAmount:1e4,maxMonthlyAmount:3e5,availableTerms:12},{id:"savings-013",name:"\uB18D\uD611 \uC815\uAE30\uC801\uAE08",annualRate:3.1,minMonthlyAmount:1e4,maxMonthlyAmount:5e5,availableTerms:18},{id:"savings-014",name:"\uCCAD\uB144 \uC815\uAE30\uC801\uAE08",annualRate:3.5,minMonthlyAmount:5e4,maxMonthlyAmount:3e5,availableTerms:24},{id:"savings-015",name:"\uBAA8\uBC14\uC77C \uC815\uAE30\uC801\uAE08",annualRate:3.4,minMonthlyAmount:1e4,maxMonthlyAmount:5e5,availableTerms:12},{id:"savings-016",name:"\uCF54\uB4DC \uC815\uAE30\uC801\uAE08",annualRate:3.6,minMonthlyAmount:5e4,maxMonthlyAmount:1e6,availableTerms:6},{id:"savings-017",name:"\uACE8\uB4DC \uC815\uAE30\uC801\uAE08",annualRate:2.5,minMonthlyAmount:1e5,maxMonthlyAmount:1e6,availableTerms:24},{id:"savings-018",name:"\uADF8\uB9B0 \uC138\uC774\uBE0C\uC801\uAE08",annualRate:2.8,minMonthlyAmount:5e4,maxMonthlyAmount:5e5,availableTerms:18},{id:"savings-019",name:"\uBBF8\uB798 \uC815\uAE30\uC801\uAE08",annualRate:3.2,minMonthlyAmount:1e4,maxMonthlyAmount:3e5,availableTerms:12},{id:"savings-020",name:"\uD76C\uB9DD \uC815\uAE30\uC801\uAE08",annualRate:3,minMonthlyAmount:1e4,maxMonthlyAmount:5e5,availableTerms:6}]));var Kt=ve;export{Kt as default};
